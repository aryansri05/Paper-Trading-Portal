{"ast":null,"code":"var _jsxFileName = \"/Users/aryansrivastava/projects/paper-trading-app/src/TradingDashboard.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { supabase } from \"./supabaseClient\"; // Ensure this path is correct\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Cell } from \"recharts\";\n\n// IMPORTANT: Replace with your actual Finnhub API Key from finnhub.io\nconst FINNHUB_API_KEY = \"d0uvgepr01qmg3uj9ug0d0uvgepr01qmg3uj9ugg\"; // <--- REPLACE THIS!!!\n\n// Helper to check for placeholder or dummy API keys\nconst isInvalidApiKey = key => {\n  return !key || key === \"YOUR_FINNHUB_API_KEY\" ||\n  // Generic placeholder\n  key === \"d0uv0tpr01qmg3uj77qgd0uv0tpr01qmg3uj77r0\" ||\n  // Common dummy key\n  key === \"d0uvgepr01qmg3uj9ug0d0uvgepr01qmg3uj9ugg\"; // Placeholder in THIS file\n};\nconst CURRENCY_SYMBOL = \"$\";\nfunction TradingDashboard({\n  user\n}) {\n  // user prop comes from App.js\n  // Log the received user prop for debugging\n  useEffect(() => {\n    console.log(\"TradingDashboard mounted or user prop changed. User:\", JSON.stringify(user, null, 2));\n  }, [user]);\n  const [trades, setTrades] = useState([]);\n  const [livePrices, setLivePrices] = useState({});\n  const [form, setForm] = useState({\n    symbol: \"\",\n    quantity: \"\",\n    type: \"buy\"\n  });\n  const [capital, setCapital] = useState(() => {\n    // Ensure user and user.id exist before trying to access localStorage\n    const userId = user === null || user === void 0 ? void 0 : user.id;\n    if (userId) {\n      const saved = localStorage.getItem(\"capital_\" + userId);\n      return saved ? Number(saved) : 100000; // Default capital in USD\n    }\n    return 100000; // Default if no user.id (should ideally not happen if App.js guards this)\n  });\n  const [availableSymbols, setAvailableSymbols] = useState([]);\n  const [symbolError, setSymbolError] = useState(\"\");\n  useEffect(() => {\n    const fetchAvailableSymbols = async () => {\n      if (isInvalidApiKey(FINNHUB_API_KEY)) {\n        console.error(\"Cannot fetch symbols: Invalid Finnhub API Key detected.\");\n        setSymbolError(\"Could not fetch available symbols. Please set a valid Finnhub API Key in the code.\");\n        setAvailableSymbols([]);\n        return;\n      }\n      try {\n        console.log(\"Fetching available US market symbols from Finnhub...\");\n        const res = await axios.get(`https://finnhub.io/api/v1/stock/symbol?exchange=US&token=${FINNHUB_API_KEY}`);\n        if (res.data && Array.isArray(res.data)) {\n          const symbols = res.data.filter(s => s.type === \"Common Stock\" && s.displaySymbol && s.symbol).map(s => s.displaySymbol.toUpperCase());\n          setAvailableSymbols(symbols);\n          console.log(`Fetched ${symbols.length} US market symbols.`);\n          if (symbols.length === 0) {\n            setSymbolError(\"No US market symbols found. Check API key permissions or Finnhub US data coverage.\");\n          } else {\n            setSymbolError(\"\");\n          }\n        } else {\n          console.warn(\"No symbols returned or unexpected format from Finnhub:\", res.data);\n          setSymbolError(\"Could not fetch symbols: No data or unexpected format from API for US market.\");\n          setAvailableSymbols([]);\n        }\n      } catch (err) {\n        var _err$response;\n        console.error(\"Error fetching available US symbols:\", err.message, (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data);\n        setSymbolError(`Could not fetch available US symbols: ${err.message}. Check API key, network, and API limits.`);\n        setAvailableSymbols([]);\n      }\n    };\n    fetchAvailableSymbols();\n  }, []); // Runs once on mount\n\n  useEffect(() => {\n    // Fetch trades only if user and user.id are valid\n    if (user && user.id && typeof user.id === 'string' && !user.id.startsWith(\"dummy-user-id\")) {\n      fetchTrades();\n    } else if (user && user.id) {\n      // Log if user.id is present but potentially problematic\n      console.warn(\"fetchTrades skipped: user.id might be a placeholder:\", user.id);\n    }\n  }, [user]);\n  useEffect(() => {\n    if (isInvalidApiKey(FINNHUB_API_KEY)) {\n      if (!symbolError.includes(\"API Key\")) {\n        setSymbolError(\"Live price updates paused: Please set a valid Finnhub API Key.\");\n      }\n      return;\n    }\n    const symbolsFromTrades = trades.map(t => t.symbol.toUpperCase());\n    const symbolFromForm = form.symbol ? [form.symbol.toUpperCase()] : [];\n    const uniqueSymbols = [...new Set([...symbolsFromTrades, ...symbolFromForm])];\n    const symbolsToFetch = uniqueSymbols.filter(s => !!s);\n    if (symbolsToFetch.length === 0) {\n      return;\n    }\n    const fetchPrices = async () => {\n      // console.log(\"Fetching prices for US symbols:\", symbolsToFetch); // Can be noisy\n      const currentPricesBatch = {};\n      // let anErrorOccurred = false; // Error handling for batch fetches can be complex\n\n      for (const sym of symbolsToFetch) {\n        try {\n          const res = await axios.get(`https://finnhub.io/api/v1/quote?symbol=${sym}&token=${FINNHUB_API_KEY}`);\n          if (res.data && typeof res.data.c === 'number' && res.data.c !== 0) {\n            currentPricesBatch[sym] = res.data.c;\n          } else {\n            // console.warn(`No valid price data for US symbol ${sym}. Finnhub response:`, res.data);\n          }\n        } catch (err) {\n          // console.error(\"Error fetching price for US symbol\", sym, err.message);\n          // if(!anErrorOccurred) { \n          //   anErrorOccurred = true;\n          // }\n        }\n      }\n      if (Object.keys(currentPricesBatch).length > 0) {\n        setLivePrices(prevPrices => ({\n          ...prevPrices,\n          ...currentPricesBatch\n        }));\n      }\n    };\n    fetchPrices();\n    const interval = setInterval(fetchPrices, 15000);\n    return () => clearInterval(interval);\n  }, [trades, form.symbol]); // Dependencies for fetching prices\n\n  useEffect(() => {\n    // Save capital to localStorage only if user and user.id are valid\n    if (user && user.id && typeof user.id === 'string' && !user.id.startsWith(\"dummy-user-id\")) {\n      localStorage.setItem(\"capital_\" + user.id, capital.toString());\n    }\n  }, [capital, user]);\n  const fetchTrades = async () => {\n    // This function is now called by the useEffect above, which already checks user and user.id\n    // if (!user || !user.id) return; // Redundant check if useEffect handles it, but safe\n    const {\n      data,\n      error\n    } = await supabase.from(\"trades\").select(\"*\").eq(\"user_id\", user.id) // Uses the user.id from props\n    .order(\"created_at\", {\n      ascending: true\n    });\n    if (!error) setTrades(data);else console.error(\"Error fetching trades:\", error.message);\n  };\n  const handleChange = e => {\n    let value = e.target.value.toUpperCase();\n    value = value.replace(/[^A-Z0-9]/g, '');\n    setForm({\n      ...form,\n      [e.target.name]: value\n    });\n  };\n  const validateAndExecuteTrade = async type => {\n    // **Explicit check for valid user and user.id at the start of trade execution**\n    if (!user || !user.id || typeof user.id !== 'string' || !user.id.includes('-') || user.id.startsWith(\"dummy-user-id\")) {\n      // The check `!user.id.includes('-')` is a loose check for UUID. A more robust regex could be used.\n      alert(\"User Authentication Error: Cannot execute trade without a valid user session. Please ensure you are logged in correctly.\");\n      console.error(\"Trade rejected: Invalid user object or user ID. User ID:\", user ? user.id : \"N/A\");\n      return;\n    }\n    console.log(`Attempting ${type} trade for user_id: ${user.id} with symbol: ${form.symbol}`); // Log before execution\n\n    if (isInvalidApiKey(FINNHUB_API_KEY)) {\n      alert(\"Trading disabled: Invalid Finnhub API Key. Please update it in the code.\");\n      return;\n    }\n    const sym = form.symbol.toUpperCase();\n    const qty = Number(form.quantity);\n    if (!sym || !qty || qty <= 0) {\n      alert(\"Invalid input: Symbol and positive quantity are required.\");\n      return;\n    }\n    if (availableSymbols.length > 0 && !availableSymbols.includes(sym)) {\n      alert(`Symbol ${sym} is not in the recognized list of US stocks. ` + `Please select from suggestions or ensure it's a valid US ticker.`);\n      setSymbolError(`Symbol ${sym} not found in available US stock list. Is your API key working?`);\n      return;\n    }\n    // This warning can be noisy if availableSymbols takes time to load, consider its placement or condition\n    // if (availableSymbols.length === 0 && !symbolError.includes(\"API Key\") && !symbolError.includes(\"Could not fetch\")){\n    //     console.warn(`Available US symbols list is empty or still loading. Attempting trade for ${sym} without list verification.`);\n    // }\n\n    const price = livePrices[sym];\n    if (typeof price !== 'number' || price <= 0) {\n      alert(`Live price for ${sym} is currently unavailable or invalid. ` + `Ensure the symbol is a correct US ticker, actively traded, and your API key is working. Try again shortly.`);\n      setSymbolError(`No valid live price for ${sym}. Check US ticker, API data availability, or API key.`);\n      return;\n    }\n\n    // Prepare the trade object with the (now hopefully valid) user.id\n    const trade = {\n      user_id: user.id,\n      symbol: sym,\n      quantity: qty,\n      price,\n      type\n    };\n    if (type === \"buy\") {\n      const cost = qty * price;\n      if (cost > capital) {\n        alert(\"Not enough capital to perform this buy trade.\");\n        return;\n      }\n      // Optimistically update capital, will be reverted on error\n      setCapital(c => c - cost);\n    } else {\n      // Sell\n      const pnlSummary = calculatePnL(trades);\n      const heldStock = pnlSummary.find(s => s.symbol === sym);\n      if (!heldStock || heldStock.netQty < qty) {\n        alert(`You only hold ${heldStock ? heldStock.netQty : 0} of ${sym}. Cannot sell ${qty}.`);\n        return;\n      }\n      // Optimistically update capital\n      setCapital(c => c + qty * price);\n    }\n    const {\n      error\n    } = await supabase.from(\"trades\").insert([trade]);\n    if (error) {\n      alert(\"Error executing trade with database: \" + error.message);\n      // Revert optimistic capital update if database insert fails\n      if (type === \"buy\") {\n        setCapital(c => c + qty * price); // Add back the cost\n      } else {\n        // Sell\n        setCapital(c => c - qty * price); // Subtract back the proceeds\n      }\n      return;\n    }\n    setForm({\n      ...form,\n      quantity: \"\"\n    });\n    fetchTrades(); // Refresh trades list\n    setSymbolError(\"\");\n  };\n  const handleBuy = () => validateAndExecuteTrade(\"buy\");\n  const handleSell = () => validateAndExecuteTrade(\"sell\");\n  const handleLogout = async () => {\n    if (!user || !user.id) return; // Should not happen if user is properly passed\n    console.log(\"Logging out user:\", user.id);\n    const {\n      error\n    } = await supabase.auth.signOut();\n    if (error) {\n      console.error(\"Error logging out:\", error.message);\n    } else {\n      // Capital is associated with user.id, so it should ideally be cleared\n      // or handled based on application logic when a user logs out.\n      // For now, let App.js handle redirecting to AuthForm which doesn't use this user's capital.\n      // localStorage.removeItem(\"capital_\" + user.id); // This would clear it\n      // window.location.reload(); // App.js will detect no user and show AuthForm\n      // Let onAuthStateChange in App.js handle the UI update.\n    }\n  };\n  const calculatePnL = currentTrades => {\n    const summary = {};\n    currentTrades.forEach(({\n      symbol,\n      quantity,\n      price,\n      type\n    }) => {\n      const s = symbol.toUpperCase();\n      if (!summary[s]) {\n        summary[s] = {\n          buyQty: 0,\n          buyTotal: 0,\n          sellQty: 0,\n          sellTotal: 0,\n          netQty: 0\n        };\n      }\n      const q = Number(quantity);\n      const p = Number(price);\n      if (type === \"buy\") {\n        summary[s].buyQty += q;\n        summary[s].buyTotal += q * p;\n        summary[s].netQty += q;\n      } else {\n        summary[s].sellQty += q;\n        summary[s].sellTotal += q * p;\n        summary[s].netQty -= q;\n      }\n    });\n    return Object.entries(summary).map(([symbol, data]) => {\n      const avgBuy = data.buyQty > 0 ? data.buyTotal / data.buyQty : 0;\n      const costOfSoldShares = avgBuy * data.sellQty;\n      const profit = data.sellTotal - costOfSoldShares;\n      return {\n        symbol,\n        netQty: data.netQty,\n        avgBuyPrice: avgBuy.toFixed(2),\n        profit: profit.toFixed(2)\n      };\n    });\n  };\n  const pnlData = calculatePnL(trades);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"1rem 2rem\",\n      fontFamily: \"Arial\",\n      maxWidth: 900,\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }\n  }, \"\\uD83D\\uDCC8 Paper Trading Dashboard (US Market)\"), user && user.email && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 31\n    }\n  }, \"Logged in as: \", user.email, \" (ID: \", user.id, \")\"), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }\n  }, \"Capital: \", CURRENCY_SYMBOL, capital.toFixed(2)), user && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleLogout,\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 16\n    }\n  }, \"Logout\"), \" \", isInvalidApiKey(FINNHUB_API_KEY) && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"red\",\n      fontWeight: \"bold\",\n      border: \"1px solid red\",\n      padding: \"0.5rem\",\n      margin: \"1rem 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 9\n    }\n  }, \"WARNING: A valid Finnhub API Key is not set in `TradingDashboard.js`. Symbol loading, live prices, and trading will not work correctly.\"), /*#__PURE__*/React.createElement(\"form\", {\n    style: {\n      marginBottom: \"1.5rem\",\n      display: \"flex\",\n      gap: \"0.5rem\",\n      flexWrap: \"wrap\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"symbol\",\n    placeholder: \"Symbol (e.g., AAPL)\",\n    value: form.symbol,\n    onChange: handleChange,\n    required: true,\n    style: {\n      width: \"180px\",\n      textTransform: \"uppercase\",\n      padding: \"8px\",\n      border: \"1px solid #ccc\"\n    },\n    list: \"symbols-list\",\n    title: \"Enter US stock symbol, e.g., AAPL, MSFT\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"datalist\", {\n    id: \"symbols-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }\n  }, availableSymbols.map(sym => /*#__PURE__*/React.createElement(\"option\", {\n    key: sym,\n    value: sym,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"quantity\",\n    type: \"number\",\n    placeholder: \"Quantity\",\n    value: form.quantity,\n    onChange: e => setForm({\n      ...form,\n      quantity: e.target.value\n    }),\n    required: true,\n    min: \"1\",\n    style: {\n      width: \"100px\",\n      padding: \"8px\",\n      border: \"1px solid #ccc\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleBuy,\n    style: {\n      padding: \"8px 15px\",\n      backgroundColor: \"#4CAF50\",\n      color: \"white\",\n      border: \"none\",\n      cursor: \"pointer\",\n      borderRadius: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 9\n    }\n  }, \"Buy\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleSell,\n    style: {\n      padding: \"8px 15px\",\n      backgroundColor: \"#f44336\",\n      color: \"white\",\n      border: \"none\",\n      cursor: \"pointer\",\n      borderRadius: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }\n  }, \"Sell\")), symbolError && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"red\",\n      marginTop: \"0.5rem\",\n      padding: \"0.5rem\",\n      border: \"1px dashed red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 23\n    }\n  }, \"\\u26A0\\uFE0F \", symbolError), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }\n  }, \"Live Prices (US Stocks)\"), Object.keys(livePrices).filter(sym => livePrices[sym] !== null && typeof livePrices[sym] === 'number').length > 0 ? /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      listStyleType: \"none\",\n      paddingLeft: 0,\n      columns: 2,\n      columnGap: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 9\n    }\n  }, Object.entries(livePrices).map(([sym, price]) => price !== null && typeof price === 'number' ? /*#__PURE__*/React.createElement(\"li\", {\n    key: sym,\n    style: {\n      padding: \"0.2rem 0\",\n      borderBottom: \"1px solid #eee\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 15\n    }\n  }, sym, \": \", CURRENCY_SYMBOL, price.toFixed(2)) : null)) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }\n  }, \"No live prices for US stocks currently displayed. Ensure your API key is valid and type a valid US ticker (e.g. AAPL).\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 7\n    }\n  }, \"Trade History\"), trades.length > 0 ? /*#__PURE__*/React.createElement(\"table\", {\n    border: \"1\",\n    cellPadding: \"8\",\n    style: {\n      width: \"100%\",\n      borderCollapse: \"collapse\",\n      marginBottom: \"1.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    style: {\n      backgroundColor: \"#f0f0f0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 15\n    }\n  }, \"Symbol\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 15\n    }\n  }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 15\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 15\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 15\n    }\n  }, \"Time\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 11\n    }\n  }, trades.map(t => /*#__PURE__*/React.createElement(\"tr\", {\n    key: t.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 17\n    }\n  }, t.symbol), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 17\n    }\n  }, t.quantity), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 17\n    }\n  }, CURRENCY_SYMBOL, Number(t.price).toFixed(2)), /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      color: t.type === \"buy\" ? \"green\" : \"red\",\n      textTransform: \"capitalize\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 17\n    }\n  }, t.type), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 17\n    }\n  }, new Date(t.created_at).toLocaleString()))))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 12\n    }\n  }, \"No trades made yet.\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }\n  }, \"Holdings & Profit/Loss\"), pnlData.length > 0 ? /*#__PURE__*/React.createElement(\"table\", {\n    border: \"1\",\n    cellPadding: \"8\",\n    style: {\n      width: \"100%\",\n      borderCollapse: \"collapse\",\n      marginBottom: \"1.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    style: {\n      backgroundColor: \"#f0f0f0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 15\n    }\n  }, \"Symbol\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 15\n    }\n  }, \"Net Qty Held\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 15\n    }\n  }, \"Avg. Buy Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 15\n    }\n  }, \"Realized P&L\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 11\n    }\n  }, pnlData.map(row => /*#__PURE__*/React.createElement(\"tr\", {\n    key: row.symbol,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 17\n    }\n  }, row.symbol), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 17\n    }\n  }, row.netQty), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 17\n    }\n  }, CURRENCY_SYMBOL, row.avgBuyPrice), /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      color: parseFloat(row.profit) >= 0 ? \"green\" : \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 17\n    }\n  }, CURRENCY_SYMBOL, row.profit))))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 12\n    }\n  }, \"No current holdings or realized P&L to display.\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 7\n    }\n  }, \"P&L Chart (Realized)\"), pnlData.filter(p => parseFloat(p.profit) !== 0).length > 0 ? /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: 300,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BarChart, {\n    data: pnlData.filter(p => parseFloat(p.profit) !== 0),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CartesianGrid, {\n    strokeDasharray: \"3 3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"symbol\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    tickFormatter: value => `${CURRENCY_SYMBOL}${value}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    formatter: value => `${CURRENCY_SYMBOL}${Number(value).toFixed(2)}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Legend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"profit\",\n    name: \"Realized P&L\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 13\n    }\n  }, pnlData.filter(p => parseFloat(p.profit) !== 0).map((entry, index) => /*#__PURE__*/React.createElement(Cell, {\n    key: `cell-${index}`,\n    fill: parseFloat(entry.profit) >= 0 ? \"#4caf50\" : \"#f44336\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 17\n    }\n  }))))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 12\n    }\n  }, \"No realized P&L to chart.\"));\n}\nexport default TradingDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","supabase","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","Cell","FINNHUB_API_KEY","isInvalidApiKey","key","CURRENCY_SYMBOL","TradingDashboard","user","console","log","JSON","stringify","trades","setTrades","livePrices","setLivePrices","form","setForm","symbol","quantity","type","capital","setCapital","userId","id","saved","localStorage","getItem","Number","availableSymbols","setAvailableSymbols","symbolError","setSymbolError","fetchAvailableSymbols","error","res","get","data","Array","isArray","symbols","filter","s","displaySymbol","map","toUpperCase","length","warn","err","_err$response","message","response","startsWith","fetchTrades","includes","symbolsFromTrades","t","symbolFromForm","uniqueSymbols","Set","symbolsToFetch","fetchPrices","currentPricesBatch","sym","c","Object","keys","prevPrices","interval","setInterval","clearInterval","setItem","toString","from","select","eq","order","ascending","handleChange","e","value","target","replace","name","validateAndExecuteTrade","alert","qty","price","trade","user_id","cost","pnlSummary","calculatePnL","heldStock","find","netQty","insert","handleBuy","handleSell","handleLogout","auth","signOut","currentTrades","summary","forEach","buyQty","buyTotal","sellQty","sellTotal","q","p","entries","avgBuy","costOfSoldShares","profit","avgBuyPrice","toFixed","pnlData","createElement","style","padding","fontFamily","maxWidth","margin","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","email","onClick","marginBottom","color","fontWeight","border","display","gap","flexWrap","alignItems","placeholder","onChange","required","width","textTransform","list","title","min","backgroundColor","cursor","borderRadius","marginTop","listStyleType","paddingLeft","columns","columnGap","borderBottom","cellPadding","borderCollapse","Date","created_at","toLocaleString","row","parseFloat","height","strokeDasharray","dataKey","tickFormatter","formatter","entry","index","fill"],"sources":["/Users/aryansrivastava/projects/paper-trading-app/src/TradingDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { supabase } from \"./supabaseClient\"; // Ensure this path is correct\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  Cell,\n} from \"recharts\";\n\n// IMPORTANT: Replace with your actual Finnhub API Key from finnhub.io\nconst FINNHUB_API_KEY = \"d0uvgepr01qmg3uj9ug0d0uvgepr01qmg3uj9ugg\"; // <--- REPLACE THIS!!!\n\n// Helper to check for placeholder or dummy API keys\nconst isInvalidApiKey = (key) => {\n  return !key ||\n         key === \"YOUR_FINNHUB_API_KEY\" || // Generic placeholder\n         key === \"d0uv0tpr01qmg3uj77qgd0uv0tpr01qmg3uj77r0\" || // Common dummy key\n         key === \"d0uvgepr01qmg3uj9ug0d0uvgepr01qmg3uj9ugg\";   // Placeholder in THIS file\n};\n\nconst CURRENCY_SYMBOL = \"$\";\n\nfunction TradingDashboard({ user }) { // user prop comes from App.js\n  // Log the received user prop for debugging\n  useEffect(() => {\n    console.log(\"TradingDashboard mounted or user prop changed. User:\", JSON.stringify(user, null, 2));\n  }, [user]);\n\n  const [trades, setTrades] = useState([]);\n  const [livePrices, setLivePrices] = useState({});\n  const [form, setForm] = useState({ symbol: \"\", quantity: \"\", type: \"buy\" });\n  const [capital, setCapital] = useState(() => {\n    // Ensure user and user.id exist before trying to access localStorage\n    const userId = user?.id;\n    if (userId) {\n      const saved = localStorage.getItem(\"capital_\" + userId);\n      return saved ? Number(saved) : 100000; // Default capital in USD\n    }\n    return 100000; // Default if no user.id (should ideally not happen if App.js guards this)\n  });\n  const [availableSymbols, setAvailableSymbols] = useState([]);\n  const [symbolError, setSymbolError] = useState(\"\");\n\n  useEffect(() => {\n    const fetchAvailableSymbols = async () => {\n      if (isInvalidApiKey(FINNHUB_API_KEY)) {\n        console.error(\"Cannot fetch symbols: Invalid Finnhub API Key detected.\");\n        setSymbolError(\n          \"Could not fetch available symbols. Please set a valid Finnhub API Key in the code.\"\n        );\n        setAvailableSymbols([]);\n        return;\n      }\n      try {\n        console.log(\"Fetching available US market symbols from Finnhub...\");\n        const res = await axios.get(\n          `https://finnhub.io/api/v1/stock/symbol?exchange=US&token=${FINNHUB_API_KEY}`\n        );\n        if (res.data && Array.isArray(res.data)) {\n          const symbols = res.data\n            .filter(\n              (s) =>\n                s.type === \"Common Stock\" &&\n                s.displaySymbol &&\n                s.symbol\n            )\n            .map((s) => s.displaySymbol.toUpperCase());\n          setAvailableSymbols(symbols);\n          console.log(`Fetched ${symbols.length} US market symbols.`);\n          if (symbols.length === 0) {\n            setSymbolError(\"No US market symbols found. Check API key permissions or Finnhub US data coverage.\");\n          } else {\n            setSymbolError(\"\"); \n          }\n        } else {\n          console.warn(\"No symbols returned or unexpected format from Finnhub:\", res.data);\n          setSymbolError(\"Could not fetch symbols: No data or unexpected format from API for US market.\");\n          setAvailableSymbols([]);\n        }\n      } catch (err) {\n        console.error(\"Error fetching available US symbols:\", err.message, err.response?.data);\n        setSymbolError(\n          `Could not fetch available US symbols: ${err.message}. Check API key, network, and API limits.`\n        );\n        setAvailableSymbols([]);\n      }\n    };\n    fetchAvailableSymbols();\n  }, []); // Runs once on mount\n\n  useEffect(() => {\n    // Fetch trades only if user and user.id are valid\n    if (user && user.id && typeof user.id === 'string' && !user.id.startsWith(\"dummy-user-id\")) {\n        fetchTrades();\n    } else if (user && user.id) { // Log if user.id is present but potentially problematic\n        console.warn(\"fetchTrades skipped: user.id might be a placeholder:\", user.id);\n    }\n  }, [user]); \n\n  useEffect(() => {\n    if (isInvalidApiKey(FINNHUB_API_KEY)) {\n      if (!symbolError.includes(\"API Key\")) {\n        setSymbolError(\"Live price updates paused: Please set a valid Finnhub API Key.\");\n      }\n      return;\n    }\n\n    const symbolsFromTrades = trades.map((t) => t.symbol.toUpperCase());\n    const symbolFromForm = form.symbol ? [form.symbol.toUpperCase()] : [];\n    \n    const uniqueSymbols = [...new Set([...symbolsFromTrades, ...symbolFromForm])];\n    const symbolsToFetch = uniqueSymbols.filter((s) => !!s); \n\n    if (symbolsToFetch.length === 0) {\n        return;\n    }\n    \n    const fetchPrices = async () => {\n      // console.log(\"Fetching prices for US symbols:\", symbolsToFetch); // Can be noisy\n      const currentPricesBatch = {};\n      // let anErrorOccurred = false; // Error handling for batch fetches can be complex\n\n      for (const sym of symbolsToFetch) {\n        try {\n          const res = await axios.get(\n            `https://finnhub.io/api/v1/quote?symbol=${sym}&token=${FINNHUB_API_KEY}`\n          );\n          if (res.data && typeof res.data.c === 'number' && res.data.c !== 0) { \n            currentPricesBatch[sym] = res.data.c;\n          } else {\n            // console.warn(`No valid price data for US symbol ${sym}. Finnhub response:`, res.data);\n          }\n        } catch (err) {\n          // console.error(\"Error fetching price for US symbol\", sym, err.message);\n          // if(!anErrorOccurred) { \n          //   anErrorOccurred = true;\n          // }\n        }\n      }\n\n      if (Object.keys(currentPricesBatch).length > 0) {\n        setLivePrices((prevPrices) => ({ ...prevPrices, ...currentPricesBatch }));\n      }\n    };\n\n    fetchPrices();\n    const interval = setInterval(fetchPrices, 15000);\n    return () => clearInterval(interval);\n  }, [trades, form.symbol]); // Dependencies for fetching prices\n\n  useEffect(() => {\n    // Save capital to localStorage only if user and user.id are valid\n    if (user && user.id && typeof user.id === 'string' && !user.id.startsWith(\"dummy-user-id\")) {\n        localStorage.setItem(\"capital_\" + user.id, capital.toString());\n    }\n  }, [capital, user]);\n\n  const fetchTrades = async () => {\n    // This function is now called by the useEffect above, which already checks user and user.id\n    // if (!user || !user.id) return; // Redundant check if useEffect handles it, but safe\n    const { data, error } = await supabase\n      .from(\"trades\")\n      .select(\"*\")\n      .eq(\"user_id\", user.id) // Uses the user.id from props\n      .order(\"created_at\", { ascending: true });\n\n    if (!error) setTrades(data);\n    else console.error(\"Error fetching trades:\", error.message);\n  };\n\n  const handleChange = (e) => {\n    let value = e.target.value.toUpperCase();\n    value = value.replace(/[^A-Z0-9]/g, ''); \n    setForm({ ...form, [e.target.name]: value });\n  };\n\n  const validateAndExecuteTrade = async (type) => {\n    // **Explicit check for valid user and user.id at the start of trade execution**\n    if (!user || !user.id || typeof user.id !== 'string' || !user.id.includes('-') || user.id.startsWith(\"dummy-user-id\")) {\n      // The check `!user.id.includes('-')` is a loose check for UUID. A more robust regex could be used.\n      alert(\"User Authentication Error: Cannot execute trade without a valid user session. Please ensure you are logged in correctly.\");\n      console.error(\"Trade rejected: Invalid user object or user ID. User ID:\", user ? user.id : \"N/A\");\n      return;\n    }\n    console.log(`Attempting ${type} trade for user_id: ${user.id} with symbol: ${form.symbol}`); // Log before execution\n\n\n    if (isInvalidApiKey(FINNHUB_API_KEY)) {\n      alert(\"Trading disabled: Invalid Finnhub API Key. Please update it in the code.\");\n      return;\n    }\n\n    const sym = form.symbol.toUpperCase(); \n    const qty = Number(form.quantity);\n\n    if (!sym || !qty || qty <= 0) {\n      alert(\"Invalid input: Symbol and positive quantity are required.\");\n      return;\n    }\n\n    if (availableSymbols.length > 0 && !availableSymbols.includes(sym)) {\n      alert(\n        `Symbol ${sym} is not in the recognized list of US stocks. ` +\n        `Please select from suggestions or ensure it's a valid US ticker.`\n      );\n      setSymbolError(`Symbol ${sym} not found in available US stock list. Is your API key working?`);\n      return;\n    }\n    // This warning can be noisy if availableSymbols takes time to load, consider its placement or condition\n    // if (availableSymbols.length === 0 && !symbolError.includes(\"API Key\") && !symbolError.includes(\"Could not fetch\")){\n    //     console.warn(`Available US symbols list is empty or still loading. Attempting trade for ${sym} without list verification.`);\n    // }\n\n    const price = livePrices[sym];\n    if (typeof price !== 'number' || price <= 0) { \n      alert(\n        `Live price for ${sym} is currently unavailable or invalid. ` +\n        `Ensure the symbol is a correct US ticker, actively traded, and your API key is working. Try again shortly.`\n      );\n      setSymbolError(`No valid live price for ${sym}. Check US ticker, API data availability, or API key.`);\n      return;\n    }\n\n    // Prepare the trade object with the (now hopefully valid) user.id\n    const trade = { user_id: user.id, symbol: sym, quantity: qty, price, type };\n\n    if (type === \"buy\") {\n      const cost = qty * price;\n      if (cost > capital) {\n        alert(\"Not enough capital to perform this buy trade.\");\n        return;\n      }\n      // Optimistically update capital, will be reverted on error\n      setCapital((c) => c - cost); \n    } else { // Sell\n      const pnlSummary = calculatePnL(trades); \n      const heldStock = pnlSummary.find(s => s.symbol === sym);\n      if (!heldStock || heldStock.netQty < qty) {\n          alert(`You only hold ${heldStock ? heldStock.netQty : 0} of ${sym}. Cannot sell ${qty}.`);\n          return;\n      }\n      // Optimistically update capital\n      setCapital((c) => c + qty * price);\n    }\n\n    const { error } = await supabase.from(\"trades\").insert([trade]);\n\n    if (error) {\n      alert(\"Error executing trade with database: \" + error.message);\n      // Revert optimistic capital update if database insert fails\n      if (type === \"buy\") {\n        setCapital((c) => c + (qty * price)); // Add back the cost\n      } else { // Sell\n        setCapital((c) => c - (qty * price)); // Subtract back the proceeds\n      }\n      return;\n    }\n\n    setForm({ ...form, quantity: \"\" }); \n    fetchTrades(); // Refresh trades list\n    setSymbolError(\"\"); \n  };\n\n  const handleBuy = () => validateAndExecuteTrade(\"buy\");\n  const handleSell = () => validateAndExecuteTrade(\"sell\");\n\n  const handleLogout = async () => {\n    if (!user || !user.id) return; // Should not happen if user is properly passed\n    console.log(\"Logging out user:\", user.id);\n    const { error } = await supabase.auth.signOut();\n    if (error) {\n        console.error(\"Error logging out:\", error.message);\n    } else {\n        // Capital is associated with user.id, so it should ideally be cleared\n        // or handled based on application logic when a user logs out.\n        // For now, let App.js handle redirecting to AuthForm which doesn't use this user's capital.\n        // localStorage.removeItem(\"capital_\" + user.id); // This would clear it\n        // window.location.reload(); // App.js will detect no user and show AuthForm\n        // Let onAuthStateChange in App.js handle the UI update.\n    }\n  };\n\n  const calculatePnL = (currentTrades) => {\n    const summary = {};\n    currentTrades.forEach(({ symbol, quantity, price, type }) => {\n      const s = symbol.toUpperCase();\n      if (!summary[s]) {\n        summary[s] = { buyQty: 0, buyTotal: 0, sellQty: 0, sellTotal: 0, netQty: 0 };\n      }\n      const q = Number(quantity);\n      const p = Number(price);\n\n      if (type === \"buy\") {\n        summary[s].buyQty += q;\n        summary[s].buyTotal += q * p;\n        summary[s].netQty += q;\n      } else { \n        summary[s].sellQty += q;\n        summary[s].sellTotal += q * p;\n        summary[s].netQty -= q;\n      }\n    });\n\n    return Object.entries(summary).map(([symbol, data]) => {\n      const avgBuy = data.buyQty > 0 ? data.buyTotal / data.buyQty : 0;\n      const costOfSoldShares = avgBuy * data.sellQty;\n      const profit = data.sellTotal - costOfSoldShares;\n\n      return {\n        symbol,\n        netQty: data.netQty,\n        avgBuyPrice: avgBuy.toFixed(2),\n        profit: profit.toFixed(2), \n      };\n    });\n  };\n\n  const pnlData = calculatePnL(trades);\n\n  return (\n    <div style={{ padding: \"1rem 2rem\", fontFamily: \"Arial\", maxWidth: 900, margin: \"auto\" }}>\n      <h1>📈 Paper Trading Dashboard (US Market)</h1>\n      { user && user.email && <p>Logged in as: {user.email} (ID: {user.id})</p> } {/* Display user.id for debugging */}\n      <p>Capital: {CURRENCY_SYMBOL}{capital.toFixed(2)}</p>\n      {user && <button onClick={handleLogout} style={{marginBottom: \"1rem\"}}>Logout</button>} {/* Show logout only if user exists */}\n\n      {isInvalidApiKey(FINNHUB_API_KEY) && (\n        <p style={{ color: \"red\", fontWeight: \"bold\", border: \"1px solid red\", padding: \"0.5rem\", margin: \"1rem 0\" }}>\n          WARNING: A valid Finnhub API Key is not set in `TradingDashboard.js`. \n          Symbol loading, live prices, and trading will not work correctly.\n        </p>\n      )}\n\n      <form style={{ marginBottom: \"1.5rem\", display: \"flex\", gap: \"0.5rem\", flexWrap: \"wrap\", alignItems: \"center\" }}>\n        <input\n          name=\"symbol\"\n          placeholder=\"Symbol (e.g., AAPL)\"\n          value={form.symbol}\n          onChange={handleChange}\n          required\n          style={{ width: \"180px\", textTransform: \"uppercase\", padding: \"8px\", border: \"1px solid #ccc\" }}\n          list=\"symbols-list\"\n          title=\"Enter US stock symbol, e.g., AAPL, MSFT\"\n        />\n        <datalist id=\"symbols-list\">\n            {availableSymbols.map((sym) => (\n                <option key={sym} value={sym} />\n            ))}\n        </datalist>\n\n        <input\n          name=\"quantity\"\n          type=\"number\"\n          placeholder=\"Quantity\"\n          value={form.quantity}\n          onChange={(e) => setForm({ ...form, quantity: e.target.value })}\n          required\n          min=\"1\"\n          style={{ width: \"100px\", padding: \"8px\", border: \"1px solid #ccc\" }}\n        />\n        <button type=\"button\" onClick={handleBuy} style={{padding: \"8px 15px\", backgroundColor: \"#4CAF50\", color: \"white\", border: \"none\", cursor: \"pointer\", borderRadius: \"4px\" }}>Buy</button>\n        <button type=\"button\" onClick={handleSell} style={{padding: \"8px 15px\", backgroundColor: \"#f44336\", color: \"white\", border: \"none\", cursor: \"pointer\", borderRadius: \"4px\" }}>Sell</button>\n      </form>\n\n      {symbolError && <p style={{ color: \"red\", marginTop: \"0.5rem\", padding: \"0.5rem\", border: \"1px dashed red\" }}>⚠️ {symbolError}</p>}\n\n      <h2>Live Prices (US Stocks)</h2>\n      {Object.keys(livePrices).filter(sym => livePrices[sym] !== null && typeof livePrices[sym] === 'number').length > 0 ? (\n        <ul style={{ listStyleType: \"none\", paddingLeft: 0, columns: 2, columnGap: \"20px\" }}>\n          {Object.entries(livePrices).map(([sym, price]) =>\n             (price !== null && typeof price === 'number') ? ( \n              <li key={sym} style={{ padding: \"0.2rem 0\", borderBottom: \"1px solid #eee\" }}>{sym}: {CURRENCY_SYMBOL}{price.toFixed(2)}</li>\n            ) : null\n          )}\n        </ul>\n      ) : (\n        <p>No live prices for US stocks currently displayed. Ensure your API key is valid and type a valid US ticker (e.g. AAPL).</p>\n      )}\n\n      <h2>Trade History</h2>\n      {trades.length > 0 ? (\n        <table border=\"1\" cellPadding=\"8\" style={{ width: \"100%\", borderCollapse: \"collapse\", marginBottom: \"1.5rem\" }}>\n          <thead style={{backgroundColor: \"#f0f0f0\"}}>\n            <tr>\n              <th>Symbol</th>\n              <th>Qty</th>\n              <th>Price</th>\n              <th>Type</th>\n              <th>Time</th>\n            </tr>\n          </thead>\n          <tbody>\n            {trades.map((t) => (\n              <tr key={t.id}>\n                <td>{t.symbol}</td>\n                <td>{t.quantity}</td>\n                <td>{CURRENCY_SYMBOL}{Number(t.price).toFixed(2)}</td>\n                <td style={{ color: t.type === \"buy\" ? \"green\" : \"red\", textTransform: \"capitalize\"}}>{t.type}</td>\n                <td>{new Date(t.created_at).toLocaleString()}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      ) : (<p>No trades made yet.</p>)}\n\n      <h2>Holdings & Profit/Loss</h2>\n      {pnlData.length > 0 ? ( \n        <table border=\"1\" cellPadding=\"8\" style={{ width: \"100%\", borderCollapse: \"collapse\", marginBottom: \"1.5rem\" }}>\n          <thead style={{backgroundColor: \"#f0f0f0\"}}>\n            <tr>\n              <th>Symbol</th>\n              <th>Net Qty Held</th>\n              <th>Avg. Buy Price</th>\n              <th>Realized P&L</th>\n            </tr>\n          </thead>\n          <tbody>\n            {pnlData.map((row) => (\n              <tr key={row.symbol}>\n                <td>{row.symbol}</td>\n                <td>{row.netQty}</td>\n                <td>{CURRENCY_SYMBOL}{row.avgBuyPrice}</td>\n                <td style={{ color: parseFloat(row.profit) >= 0 ? \"green\" : \"red\" }}>{CURRENCY_SYMBOL}{row.profit}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      ) : (<p>No current holdings or realized P&L to display.</p>)}\n\n      <h2>P&L Chart (Realized)</h2>\n      {pnlData.filter(p => parseFloat(p.profit) !== 0).length > 0 ? (\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <BarChart data={pnlData.filter(p => parseFloat(p.profit) !== 0)}> \n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"symbol\" />\n            <YAxis tickFormatter={(value) => `${CURRENCY_SYMBOL}${value}`}/>\n            <Tooltip formatter={(value) => `${CURRENCY_SYMBOL}${Number(value).toFixed(2)}`} />\n            <Legend />\n            <Bar dataKey=\"profit\" name=\"Realized P&L\">\n              {pnlData.filter(p => parseFloat(p.profit) !== 0).map((entry, index) => (\n                <Cell key={`cell-${index}`} fill={parseFloat(entry.profit) >= 0 ? \"#4caf50\" : \"#f44336\"} />\n              ))}\n            </Bar>\n          </BarChart>\n        </ResponsiveContainer>\n      ) : (<p>No realized P&L to chart.</p>)}\n    </div>\n  );\n}\n\nexport default TradingDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}