{"ast":null,"code":"// src/pages/WatchlistPage.js\nimport React,{useState,useEffect}from'react';import{supabase}from'../supabaseClient';// Adjust path if needed\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WatchlistPage=()=>{const[watchlist,setWatchlist]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchWatchlist=async()=>{setLoading(true);setError(null);try{const{data:{session}}=await supabase.auth.getSession();if(!session){setError(\"You must be logged in to view your watchlist.\");setLoading(false);return;}const user=session.user;if(!user){setError(\"User session not found.\");setLoading(false);return;}// Fetch data from the 'watchlists' table for the current user\nconst{data,error}=await supabase.from('watchlists').select('symbol')// Select only the symbol column\n.eq('user_id',user.id);// Filter by the current user's ID\nif(error){throw error;}setWatchlist(data||[]);// Set the fetched data to state, default to empty array\n}catch(err){console.error(\"Error fetching watchlist:\",err);setError(err.message||\"Failed to load watchlist.\");}finally{setLoading(false);}};fetchWatchlist();},[]);// Empty dependency array means this runs once on mount\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"watchlist-page\",style:{color:'white',padding:'20px'},children:\"Loading watchlist...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"watchlist-page\",style:{color:'red',padding:'20px'},children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"watchlist-page\",style:{padding:'20px',color:'white',backgroundColor:'#1a1a1a',minHeight:'100vh'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Watchlist\"}),watchlist.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Your watchlist is empty. Add some stocks to get started!\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyleType:'none',padding:0},children:watchlist.map((item,index)=>/*#__PURE__*/_jsx(\"li\",{style:{marginBottom:'10px',padding:'10px',backgroundColor:'#2c2c2c',borderRadius:'5px'},children:/*#__PURE__*/_jsx(\"strong\",{children:item.symbol})},index))})]});};export default WatchlistPage;","map":{"version":3,"names":["React","useState","useEffect","supabase","jsx","_jsx","jsxs","_jsxs","WatchlistPage","watchlist","setWatchlist","loading","setLoading","error","setError","fetchWatchlist","data","session","auth","getSession","user","from","select","eq","id","err","console","message","className","style","color","padding","children","backgroundColor","minHeight","length","listStyleType","map","item","index","marginBottom","borderRadius","symbol"],"sources":["/Users/aryansrivastava/projects/Paper-Trading-Portal/src/pages/WatchlistPage.js"],"sourcesContent":["// src/pages/WatchlistPage.js\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../supabaseClient'; // Adjust path if needed\n\nconst WatchlistPage = () => {\n    const [watchlist, setWatchlist] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchWatchlist = async () => {\n            setLoading(true);\n            setError(null);\n            try {\n                const { data: { session } } = await supabase.auth.getSession();\n\n                if (!session) {\n                    setError(\"You must be logged in to view your watchlist.\");\n                    setLoading(false);\n                    return;\n                }\n\n                const user = session.user;\n\n                if (!user) {\n                    setError(\"User session not found.\");\n                    setLoading(false);\n                    return;\n                }\n\n                // Fetch data from the 'watchlists' table for the current user\n                const { data, error } = await supabase\n                    .from('watchlists')\n                    .select('symbol') // Select only the symbol column\n                    .eq('user_id', user.id); // Filter by the current user's ID\n\n                if (error) {\n                    throw error;\n                }\n\n                setWatchlist(data || []); // Set the fetched data to state, default to empty array\n            } catch (err) {\n                console.error(\"Error fetching watchlist:\", err);\n                setError(err.message || \"Failed to load watchlist.\");\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchWatchlist();\n    }, []); // Empty dependency array means this runs once on mount\n\n    if (loading) {\n        return <div className=\"watchlist-page\" style={{ color: 'white', padding: '20px' }}>Loading watchlist...</div>;\n    }\n\n    if (error) {\n        return <div className=\"watchlist-page\" style={{ color: 'red', padding: '20px' }}>Error: {error}</div>;\n    }\n\n    return (\n        <div className=\"watchlist-page\" style={{ padding: '20px', color: 'white', backgroundColor: '#1a1a1a', minHeight: '100vh' }}>\n            <h2>My Watchlist</h2>\n            {watchlist.length === 0 ? (\n                <p>Your watchlist is empty. Add some stocks to get started!</p>\n            ) : (\n                <ul style={{ listStyleType: 'none', padding: 0 }}>\n                    {watchlist.map((item, index) => (\n                        <li key={index} style={{ marginBottom: '10px', padding: '10px', backgroundColor: '#2c2c2c', borderRadius: '5px' }}>\n                            <strong>{item.symbol}</strong>\n                            {/* You can add more details here if your watchlist table stores them,\n                                or fetch current prices using Finnhub for each symbol if desired. */}\n                        </li>\n                    ))}\n                </ul>\n            )}\n        </div>\n    );\n};\n\nexport default WatchlistPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}