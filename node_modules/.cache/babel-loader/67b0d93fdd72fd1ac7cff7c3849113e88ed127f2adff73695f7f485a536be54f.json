{"ast":null,"code":"// src/pages/StockDetailsPage.js\nimport React,{useState,useEffect,useCallback}from'react';import{useParams}from'react-router-dom';// Assuming you use react-router-dom for routing\nimport axios from'axios';import StockChart from'../components/StockChart';// Import your StockChart component\nimport{FINNHUB_API_KEY,isInvalidApiKey,CURRENCY_SYMBOL}from'../TradingDataContext';// Import API key and currency\nimport'./StockDetailsPage.css';// Assuming you have a CSS file for this page\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function StockDetailsPage(){const{symbol}=useParams();// Get the stock symbol from the URL (e.g., /stocks/AAPL)\nconst[companyProfile,setCompanyProfile]=useState(null);const[loadingCompanyData,setLoadingCompanyData]=useState(true);const[companyError,setCompanyError]=useState(null);// --- Fetch Company Profile Data ---\nconst fetchCompanyProfile=useCallback(async stockSymbol=>{if(!stockSymbol||isInvalidApiKey(FINNHUB_API_KEY)){setCompanyError(\"Invalid symbol or Finnhub API Key. Cannot fetch company profile.\");setLoadingCompanyData(false);setCompanyProfile(null);return;}setLoadingCompanyData(true);setCompanyError(null);setCompanyProfile(null);// Clear previous data\ntry{// Using Finnhub's 'profile2' endpoint for company details\nconst response=await axios.get(\"https://finnhub.io/api/v1/stock/profile2?symbol=\".concat(stockSymbol,\"&token=\").concat(FINNHUB_API_KEY));if(response.data&&Object.keys(response.data).length>0){setCompanyProfile(response.data);}else{setCompanyError(\"No company profile data found for \".concat(stockSymbol,\". This may be due to an invalid symbol or Finnhub free tier restrictions.\"));}}catch(err){console.error(\"Error fetching company profile:\",err);setCompanyError(\"Failed to load company profile for \".concat(stockSymbol,\". Please check your Finnhub API key and try again.\"));}finally{setLoadingCompanyData(false);}},[]);useEffect(()=>{if(symbol){fetchCompanyProfile(symbol.toUpperCase());// Fetch profile when symbol changes\n}},[symbol,fetchCompanyProfile]);if(!symbol){return/*#__PURE__*/_jsx(\"div\",{className:\"stock-detail-container message\",children:\"Please specify a stock symbol in the URL.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"stock-detail-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"stock-symbol-header\",children:[symbol.toUpperCase(),\" Details\"]}),loadingCompanyData?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading company profile...\"})]}):companyError?/*#__PURE__*/_jsx(\"p\",{className:\"message error-message\",children:companyError}):companyProfile?/*#__PURE__*/_jsxs(\"div\",{className:\"company-profile-section card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[companyProfile.name,\" (\",companyProfile.ticker,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Exchange:\"}),\" \",companyProfile.exchange]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Industry:\"}),\" \",companyProfile.finnhubIndustry]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"IPO:\"}),\" \",companyProfile.ipo]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Market Cap:\"}),\" \",CURRENCY_SYMBOL,companyProfile.marketCapitalization?companyProfile.marketCapitalization.toLocaleString():'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Website:\"}),\" \",/*#__PURE__*/_jsx(\"a\",{href:companyProfile.weburl,target:\"_blank\",rel:\"noopener noreferrer\",children:companyProfile.weburl})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"message info-message\",children:\"No company profile available.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stock-chart-section card\",children:/*#__PURE__*/_jsx(StockChart,{symbol:symbol.toUpperCase()})})]});}export default StockDetailsPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","axios","StockChart","FINNHUB_API_KEY","isInvalidApiKey","CURRENCY_SYMBOL","jsx","_jsx","jsxs","_jsxs","StockDetailsPage","symbol","companyProfile","setCompanyProfile","loadingCompanyData","setLoadingCompanyData","companyError","setCompanyError","fetchCompanyProfile","stockSymbol","response","get","concat","data","Object","keys","length","err","console","error","toUpperCase","className","children","name","ticker","exchange","finnhubIndustry","ipo","marketCapitalization","toLocaleString","href","weburl","target","rel"],"sources":["/Users/aryansrivastava/projects/Paper-Trading-Portal/src/pages/StockDetailsPage.js"],"sourcesContent":["// src/pages/StockDetailsPage.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useParams } from 'react-router-dom'; // Assuming you use react-router-dom for routing\nimport axios from 'axios';\nimport StockChart from '../components/StockChart'; // Import your StockChart component\nimport { FINNHUB_API_KEY, isInvalidApiKey, CURRENCY_SYMBOL } from '../TradingDataContext'; // Import API key and currency\nimport './StockDetailsPage.css'; // Assuming you have a CSS file for this page\n\nfunction StockDetailsPage() {\n    const { symbol } = useParams(); // Get the stock symbol from the URL (e.g., /stocks/AAPL)\n    const [companyProfile, setCompanyProfile] = useState(null);\n    const [loadingCompanyData, setLoadingCompanyData] = useState(true);\n    const [companyError, setCompanyError] = useState(null);\n\n    // --- Fetch Company Profile Data ---\n    const fetchCompanyProfile = useCallback(async (stockSymbol) => {\n        if (!stockSymbol || isInvalidApiKey(FINNHUB_API_KEY)) {\n            setCompanyError(\"Invalid symbol or Finnhub API Key. Cannot fetch company profile.\");\n            setLoadingCompanyData(false);\n            setCompanyProfile(null);\n            return;\n        }\n\n        setLoadingCompanyData(true);\n        setCompanyError(null);\n        setCompanyProfile(null); // Clear previous data\n\n        try {\n            // Using Finnhub's 'profile2' endpoint for company details\n            const response = await axios.get(\n                `https://finnhub.io/api/v1/stock/profile2?symbol=${stockSymbol}&token=${FINNHUB_API_KEY}`\n            );\n\n            if (response.data && Object.keys(response.data).length > 0) {\n                setCompanyProfile(response.data);\n            } else {\n                setCompanyError(`No company profile data found for ${stockSymbol}. This may be due to an invalid symbol or Finnhub free tier restrictions.`);\n            }\n        } catch (err) {\n            console.error(\"Error fetching company profile:\", err);\n            setCompanyError(`Failed to load company profile for ${stockSymbol}. Please check your Finnhub API key and try again.`);\n        } finally {\n            setLoadingCompanyData(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        if (symbol) {\n            fetchCompanyProfile(symbol.toUpperCase()); // Fetch profile when symbol changes\n        }\n    }, [symbol, fetchCompanyProfile]);\n\n    if (!symbol) {\n        return <div className=\"stock-detail-container message\">Please specify a stock symbol in the URL.</div>;\n    }\n\n    return (\n        <div className=\"stock-detail-container\">\n            <h2 className=\"stock-symbol-header\">{symbol.toUpperCase()} Details</h2>\n\n            {loadingCompanyData ? (\n                <div className=\"loading-section\">\n                    <div className=\"spinner\"></div>\n                    <p>Loading company profile...</p>\n                </div>\n            ) : companyError ? (\n                <p className=\"message error-message\">{companyError}</p>\n            ) : companyProfile ? (\n                <div className=\"company-profile-section card\">\n                    <h3>{companyProfile.name} ({companyProfile.ticker})</h3>\n                    <p><strong>Exchange:</strong> {companyProfile.exchange}</p>\n                    <p><strong>Industry:</strong> {companyProfile.finnhubIndustry}</p>\n                    <p><strong>IPO:</strong> {companyProfile.ipo}</p>\n                    <p><strong>Market Cap:</strong> {CURRENCY_SYMBOL}{companyProfile.marketCapitalization ? companyProfile.marketCapitalization.toLocaleString() : 'N/A'}</p>\n                    <p><strong>Website:</strong> <a href={companyProfile.weburl} target=\"_blank\" rel=\"noopener noreferrer\">{companyProfile.weburl}</a></p>\n                    {/* Add more company details as needed */}\n                </div>\n            ) : (\n                <p className=\"message info-message\">No company profile available.</p>\n            )}\n\n            {/* Render the StockChart component */}\n            <div className=\"stock-chart-section card\">\n                <StockChart symbol={symbol.toUpperCase()} />\n            </div>\n\n            {/* You can add other sections here, like news, financials, etc. */}\n        </div>\n    );\n}\n\nexport default StockDetailsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}